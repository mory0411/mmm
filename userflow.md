# MORY 사용자 플로우 (MVP)

---

## 1. 시작/로그인
- 사용자는 서비스 메인 페이지(`/`)에 접속한다.
- 로그인하지 않은 경우, '카카오 로그인' 버튼을 클릭해 카카오 OAuth로 인증한다.
- 최초 로그인 시, 카카오 프로필(닉네임/이메일) 정보가 Supabase `profiles` 테이블에 동기화된다.
- 로그인 후, 대시보드(`/`)로 자동 이동한다.

---

## 2. 대시보드(관계 목록) `/`
- 상단에 로그인된 유저의 닉네임(또는 이메일)이 표시된다.
- '내 관계 목록' 영역에 사용자가 참여 중인 모든 관계(부모/자녀)가 카드 형태로 나열된다.
  - 각 카드에는 관계 코드(hash), 내 역할(부모/자녀), 생성일, '입장' 버튼이 있다.
- '입장' 버튼을 누르면 해당 관계의 Q&A 페이지(`/r/[hash]`)로 이동한다.
- '새 관계 생성' 버튼을 누르면 관계 생성 페이지(`/relationships/new`)로 이동한다.

---

## 3. 관계 생성 `/relationships/new`
- 사용자는 '부모' 또는 '자녀' 역할을 선택할 수 있다.
- '관계 생성' 버튼을 누르면 Supabase에 새로운 관계 row가 생성된다.
  - 선택한 역할에 따라 parent_user_id 또는 child_user_id에 내 user.id가 저장된다.
  - 관계 코드(hash)가 자동 생성된다.
- 생성된 관계 코드는 화면에 표시되며, '복사' 버튼으로 클립보드에 복사할 수 있다.
- 사용자는 이 코드를 상대방에게 전달해 초대할 수 있다.

---

## 4. 공유 링크 접속 및 역할 선택 `/r/[hash]`
- 상대방(부모 또는 자녀)은 전달받은 링크(`/r/[hash]`)로 접속한다.
- 해당 관계가 존재하지 않으면 '존재하지 않는 관계입니다.' 메시지가 표시된다.
- 이미 참여 중인 유저라면 바로 Q&A 화면으로 진입한다.
- 아직 역할이 없는 유저라면 '부모로 참여' 또는 '자녀로 참여' 버튼이 표시된다.
  - 역할을 선택하면 해당 관계 row에 내 user.id가 저장되고, Q&A 화면으로 진입한다.

---

## 5. Q&A(질문/답변) `/r/[hash]`
- 상단에 'Q&A' 제목이 표시된다.
- 관계에 등록된 전체 질문 목록이 카드 형태로 나열된다.
- 각 질문 카드에는 다음이 표시된다:
  - 질문 내용
  - 내 답변: 이미 답변했다면 답변 내용만, 아니면 입력 폼과 '저장' 버튼
  - 상대 답변: 상대방이 답변했다면 답변 내용, 아니면 '아직 답변이 없습니다.'
- 답변은 1회만 입력 가능(수정 불가), 500자 제한
- 답변 저장 시 실시간으로 반영되어 상대방도 확인 가능

---

## 6. 기타
- 사용자는 언제든 대시보드(`/`)로 돌아가 다른 관계에 입장하거나 새 관계를 생성할 수 있다.
- 로그아웃/프로필 수정 등은 MVP 이후 추가 예정
